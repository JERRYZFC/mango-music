(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{110:function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"c",function(){return r}),t.d(n,"b",function(){return i});var a=t(3),s=function e(n,t,s,r){Object(a.a)(this,e),this.id=n,this.mId=t,this.name=s,this.img=r};function r(e){return new s(e.singerID,e.singerMID,e.singerName,e.singerPic)}function i(e){return new s(e.singer_id,e.singer_mid,e.singer_name,"http://y.gtimg.cn/music/photo_new/T001R300x300M000".concat(e.singer_mid,".jpg?max_age=2592000"))}},131:function(e,n,t){"use strict";t.d(n,"b",function(){return r}),t.d(n,"a",function(){return i});var a=t(92),s=t(90);function r(e,n){var t=Object.assign({},s.c,{g_tk:5381,loginUin:0,hostUin:0,platform:"yqq",needNewCode:0,channel:"singer",page:"list",key:n,pagenum:e,pagesize:100});return Object(a.a)(s.d.singerList,t,s.b)}function i(e){var n=Object.assign({},s.c,{g_tk:5381,loginUin:0,hostUin:0,platform:"yqq",needNewCode:0,singermid:e,order:"listen",begin:0,num:100,songstatus:1});return Object(a.a)(s.d.singerInfo,n,s.b)}},218:function(e,n,t){e.exports={"singer-img":"singer_singer-img__f20tr",singerImg:"singer_singer-img__f20tr",fixed:"singer_fixed__2qM0M","play-wrapper":"singer_play-wrapper__1K15k",playWrapper:"singer_play-wrapper__1K15k","play-button":"singer_play-button__2LUCh",playButton:"singer_play-button__2LUCh",filter:"singer_filter__1K9TI","singer-container":"singer_singer-container__4Aob4",singerContainer:"singer_singer-container__4Aob4","singer-scroll":"singer_singer-scroll__3Ec0A",singerScroll:"singer_singer-scroll__3Ec0A","singer-wrapper":"singer_singer-wrapper__2frRs",singerWrapper:"singer_singer-wrapper__2frRs","song-count":"singer_song-count__3FQSn",songCount:"singer_song-count__3FQSn","song-list":"singer_song-list__1QFQ4",songList:"singer_song-list__1QFQ4",song:"singer_song__19OX6"}},227:function(e,n,t){"use strict";t.r(n);var a=t(15),s=t(16),r=t(3),i=t(5),c=t(7),o=t(6),g=t(8),l=t(0),u=t.n(l),m=t(14),f=t(140),p=t(28),d=t(93),_=t(118),h=t(131),y=t(117),v=t(90),b=t(110),E=t(29),w=t(218),R=t.n(w),N=function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(c.a)(this,Object(o.a)(n).call(this,e))).playAll=function(){t.state.songs.length>0&&(t.props.setSongs(t.state.songs),t.props.changeCurrentSong(t.state.songs[0]),t.props.showMusicPlayer(!0))},t.scroll=function(e){var n=e.y,a=t.singerBgRef.current,s=t.singerFixedBgRef.current,r=t.playButtonWrapperRef.current;if(n<0)Math.abs(n)+55>a.offsetHeight?s.style.display="block":s.style.display="none";else{var i="scale(".concat(1+.004*n,", ").concat(1+.004*n,")");a.style.webkitTransform=i,a.style.transform=i,r.style.marginTop="".concat(n,"px")}},t.singerBgRef=u.a.createRef(),t.singerContainerRef=u.a.createRef(),t.singerFixedBgRef=u.a.createRef(),t.playButtonWrapperRef=u.a.createRef(),t.musicalNoteRef=u.a.createRef(),t.state={show:!1,loading:!0,singer:{},songs:[]},t}return Object(g.a)(n,e),Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({show:!0}),this.singerContainerRef.current.style.top=this.singerBgRef.current.offsetHeight+"px"}},{key:"getSingerInfo",value:function(){var e=this;Object(h.a)(this.props.match.params.id).then(function(n){if(n&&n.code===v.a){var t=b.b(n.data);t.desc=n.data.desc;var a=n.data.list,s=[];a.forEach(function(n){if(1!==n.musicData.pay.payplay){var t=E.b(n.musicData);e.getSongUrl(t,t.mId),s.push(t)}}),e.setState({loading:!1,singer:t,songs:s})}})}},{key:"getSongUrl",value:function(e,n){Object(y.a)(n).then(function(n){if(n&&n.code===v.a&&n.data.items){var t=n.data.items[0];e.url="http://dl.stream.qqmusic.qq.com/".concat(t.filename,"?vkey=").concat(t.vkey,"&guid=3655047200&fromtag=66")}})}},{key:"selectSong",value:function(e){var n=this;return function(t){n.props.setSongs([e]),n.props.changeCurrentSong(e),n.musicalNoteRef.current.startAnimation({x:t.nativeEvent.clientX,y:t.nativeEvent.clientY})}}},{key:"render",value:function(){var e=this,n=this.state.singer,t={};n.img&&(t.backgroundImage="url(".concat(n.img,")"));var a=this.state.songs.map(function(n){return u.a.createElement("div",{className:R.a.song,key:n.id,onClick:e.selectSong(n)},u.a.createElement("div",{className:"song-name"},n.name),u.a.createElement("div",{className:"song-singer"},n.singer))});return u.a.createElement(m.CSSTransition,{in:this.state.show,timeout:300,classNames:"translate",onEntered:function(){e.getSingerInfo()}},u.a.createElement("div",{className:"music-singer"},u.a.createElement(f.a,{title:n.name}),u.a.createElement("div",{style:{position:"relative"}},u.a.createElement("div",{ref:this.singerBgRef,className:R.a.singerImg,style:t},u.a.createElement("div",{className:R.a.filter})),u.a.createElement("div",{ref:this.singerFixedBgRef,className:R.a.singerImg+" "+R.a.fixed,style:t},u.a.createElement("div",{className:R.a.filter})),u.a.createElement("div",{className:R.a.playWrapper,ref:this.playButtonWrapperRef},u.a.createElement("div",{className:R.a.playButton,onClick:this.playAll},u.a.createElement("i",{className:"icon-play"}),u.a.createElement("span",null,"\u64ad\u653e\u5168\u90e8")))),u.a.createElement("div",{ref:this.singerContainerRef,className:R.a.singerContainer},u.a.createElement("div",{className:R.a.singerScroll,style:!0===this.state.loading?{display:"none"}:{}},u.a.createElement(p.a,{onScroll:this.scroll},u.a.createElement("div",{className:"".concat(R.a.singerWrapper," skin-detail-wrapper")},u.a.createElement("div",{className:R.a.songCount},"\u6b4c\u66f2 \u5171",a.length,"\u9996"),u.a.createElement("div",{className:R.a.songList},a)))),u.a.createElement(d.a,{title:"\u6b63\u5728\u52a0\u8f7d...",show:this.state.loading})),u.a.createElement(_.a,{ref:this.musicalNoteRef})))}}]),n}(u.a.Component);n.default=Object(a.b)(null,function(e){return{showMusicPlayer:function(n){e(Object(s.e)(n))},changeCurrentSong:function(n){e(Object(s.a)(n))},setSongs:function(n){e(Object(s.d)(n))}}})(N)}}]);