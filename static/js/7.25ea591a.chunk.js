(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{109:function(e,a,t){"use strict";t.d(a,"b",function(){return s}),t.d(a,"a",function(){return i}),t.d(a,"c",function(){return r});var n=t(3),l=function e(a,t,l,s,i,r){Object(n.a)(this,e),this.id=a,this.mId=t,this.name=l,this.img=s,this.singer=i,this.publicTime=r};function s(e){return new l(e.album_id,e.album_mid,e.album_name,"http://y.gtimg.cn/music/photo_new/T002R300x300M000".concat(e.album_mid,".jpg?max_age=2592000"),e.singers.map(function(e){return e.singer_name}).join("/"),e.public_time)}function i(e){return new l(e.id,e.mid,e.name,"http://y.gtimg.cn/music/photo_new/T002R300x300M000".concat(e.mid,".jpg?max_age=2592000"),e.singername,e.aDate)}function r(e){return new l(e.albumID,e.albumMID,e.albumName,e.albumPic,e.singerName,"")}},128:function(e,a,t){"use strict";t.d(a,"b",function(){return s}),t.d(a,"c",function(){return i}),t.d(a,"a",function(){return r});var n=t(92),l=t(90);function s(){var e=Object.assign({},l.c,{g_tk:701075963,uin:0,platform:"h5",needNewCode:1,_:(new Date).getTime()});return Object(n.a)(l.d.carousel,e,l.b)}function i(){var e=Object.assign({},l.c,{g_tk:1278911659,hostUin:0,platform:"yqq",needNewCode:0,data:'{"albumlib":\n\t\t{"method":"get_album_by_tags","param":\n\t\t{"area":1,"company":-1,"genre":-1,"type":-1,"year":-1,"sort":2,"get_tags":1,"sin":0,"num":50,"click_albumid":0},\n\t\t"module":"music.web_album_library"}}'});return Object(n.a)(l.d.newalbum,e,{param:"callback",prefix:"callback"})}function r(e){var a=Object.assign({},l.c,{albummid:e,g_tk:1278911659,hostUin:0,platform:"yqq",needNewCode:0});return Object(n.a)(l.d.albumInfo,a,l.b)}},214:function(e,a,t){e.exports={"album-img":"album_album-img__11AwB",albumImg:"album_album-img__11AwB",fixed:"album_fixed__2QiLb","play-wrapper":"album_play-wrapper__z3NcT",playWrapper:"album_play-wrapper__z3NcT","play-button":"album_play-button__2GIEa",playButton:"album_play-button__2GIEa",filter:"album_filter__1YzOB","album-container":"album_album-container__3__N0",albumContainer:"album_album-container__3__N0","album-scroll":"album_album-scroll__1nsmN",albumScroll:"album_album-scroll__1nsmN","album-wrapper":"album_album-wrapper__2wX5T",albumWrapper:"album_album-wrapper__2wX5T","song-count":"album_song-count__3UP3_",songCount:"album_song-count__3UP3_","song-list":"album_song-list__10KNi",songList:"album_song-list__10KNi",song:"album_song__hQFKN","album-info":"album_album-info__1yO_R",albumInfo:"album_album-info__1yO_R","album-title":"album_album-title__gnSjY",albumTitle:"album_album-title__gnSjY","album-desc":"album_album-desc__Tbr2S",albumDesc:"album_album-desc__Tbr2S"}},229:function(e,a,t){"use strict";t.r(a);var n=t(15),l=t(16),s=t(3),i=t(5),r=t(7),m=t(6),c=t(8),u=t(0),o=t.n(u),b=t(14),_=t(140),g=t(28),p=t(93),f=t(118),d=t(128),h=t(117),y=t(90),v=t(109),N=t(29),w=t(214),E=t.n(w),R=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(r.a)(this,Object(m.a)(a).call(this,e))).playAll=function(){t.state.songs.length>0&&(t.props.setSongs(t.state.songs),t.props.changeCurrentSong(t.state.songs[0]),t.props.showMusicPlayer(!0))},t.scroll=function(e){var a=e.y,n=t.albumBgRef.current,l=t.albumFixedBgRef.current,s=t.playButtonWrapperRef.current;if(a<0)Math.abs(a)+55>n.offsetHeight?l.style.display="block":l.style.display="none";else{var i="scale(".concat(1+.004*a,", ").concat(1+.004*a,")");n.style.webkitTransform=i,n.style.transform=i,s.style.marginTop="".concat(a,"px")}},t.albumBgRef=o.a.createRef(),t.albumContainerRef=o.a.createRef(),t.albumFixedBgRef=o.a.createRef(),t.playButtonWrapperRef=o.a.createRef(),t.musicalNoteRef=o.a.createRef(),t.state={show:!1,loading:!0,album:{},songs:[]},t}return Object(c.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({show:!0}),this.albumContainerRef.current.style.top=this.albumBgRef.current.offsetHeight+"px",Object(d.a)(this.props.match.params.id).then(function(a){if(a&&a.code===y.a){var t=v.a(a.data);t.desc=a.data.desc;var n=a.data.list,l=[];n.forEach(function(a){var t=N.b(a);e.getSongUrl(t,a.songmid),l.push(t)}),e.setState({loading:!1,album:t,songs:l})}})}},{key:"getSongUrl",value:function(e,a){Object(h.a)(a).then(function(a){if(a&&a.code===y.a&&a.data.items){var t=a.data.items[0];e.url="http://dl.stream.qqmusic.qq.com/".concat(t.filename,"?vkey=").concat(t.vkey,"&guid=3655047200&fromtag=66")}})}},{key:"selectSong",value:function(e){var a=this;return function(t){a.props.setSongs([e]),a.props.changeCurrentSong(e),a.musicalNoteRef.current.startAnimation({x:t.nativeEvent.clientX,y:t.nativeEvent.clientY})}}},{key:"render",value:function(){var e=this,a=this.state.album,t={};a.img&&(t.backgroundImage="url(".concat(a.img,")"));var n=this.state.songs.map(function(a){return o.a.createElement("div",{className:E.a.song,key:a.id,onClick:e.selectSong(a)},o.a.createElement("div",{className:"song-name"},a.name),o.a.createElement("div",{className:"song-singer"},a.singer))});return o.a.createElement(b.CSSTransition,{in:this.state.show,timeout:300,classNames:"translate"},o.a.createElement("div",{className:"music-album"},o.a.createElement(_.a,{title:a.name}),o.a.createElement("div",{style:{position:"relative"}},o.a.createElement("div",{ref:this.albumBgRef,className:E.a.albumImg,style:t},o.a.createElement("div",{className:E.a.filter})),o.a.createElement("div",{ref:this.albumFixedBgRef,className:E.a.albumImg+" "+E.a.fixed,style:t},o.a.createElement("div",{className:E.a.filter})),o.a.createElement("div",{className:E.a.playWrapper,ref:this.playButtonWrapperRef},o.a.createElement("div",{className:E.a.playButton,onClick:this.playAll},o.a.createElement("i",{className:"icon-play"}),o.a.createElement("span",null,"\u64ad\u653e\u5168\u90e8")))),o.a.createElement("div",{ref:this.albumContainerRef,className:E.a.albumContainer},o.a.createElement("div",{className:E.a.albumScroll,style:!0===this.state.loading?{display:"none"}:{}},o.a.createElement(g.a,{onScroll:this.scroll},o.a.createElement("div",{className:"".concat(E.a.albumWrapper," skin-detail-wrapper")},o.a.createElement("div",{className:E.a.songCount},"\u4e13\u8f91 \u5171",n.length,"\u9996"),o.a.createElement("div",{className:E.a.songList},n),o.a.createElement("div",{className:E.a.albumInfo,style:a.desc?{}:{display:"none"}},o.a.createElement("h1",{className:E.a.albumTitle},"\u4e13\u8f91\u7b80\u4ecb"),o.a.createElement("div",{className:E.a.albumDesc,dangerouslySetInnerHTML:{__html:a.desc}}))))),o.a.createElement(p.a,{title:"\u6b63\u5728\u52a0\u8f7d...",show:this.state.loading})),o.a.createElement(f.a,{ref:this.musicalNoteRef})))}}]),a}(o.a.Component);a.default=Object(n.b)(null,function(e){return{showMusicPlayer:function(a){e(Object(l.e)(a))},changeCurrentSong:function(a){e(Object(l.a)(a))},setSongs:function(a){e(Object(l.d)(a))}}})(R)}}]);